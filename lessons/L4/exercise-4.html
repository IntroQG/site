

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Exercise 4 &mdash; IntroQG 2019 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'2019',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=UA-92357604-2"></script>
        <script type="text/javascript" src="../../_static/google_analytics_tracker.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/banner.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> IntroQG
          

          
            
            <img src="../../_static/HY-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                2019
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Course information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../general-info/course-details.html">Course details</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../general-info/course-details.html#course-meetings">Course meetings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general-info/course-details.html#instructors">Instructors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general-info/course-details.html#course-website">Course website</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general-info/course-details.html#textbooks">Textbooks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../general-info/grading.html">Grading</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../general-info/grading.html#general-grading-breakdown">General grading breakdown</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../general-info/licensing.html">Content licenses</a></li>
</ul>
<p class="caption"><span class="caption-text">Lesson 1</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L1/overview.html">Lesson overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../L1/overview.html#learning-objectives">Learning objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../L1/overview.html#lesson-video">Lesson video</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks/L1/numpy.html">A few useful NumPy functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../notebooks/L1/numpy.html#Getting-started">Getting started</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../notebooks/L1/numpy.html#Defining-arrays-with-a-fixed-number-of-increments">Defining arrays with a fixed number of increments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../notebooks/L1/numpy.html#Defining-arrays-with-a-fixed-increment-between-values">Defining arrays with a fixed increment between values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../notebooks/L1/numpy.html#Generating-random-numbers-with-NumPy">Generating random numbers with NumPy</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../L1/basic-terms.html">Basic statistical terms and concepts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../L1/basic-terms.html#populations-and-samples">Populations and samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../L1/uncertainty.html">Uncertainty</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../L1/uncertainty.html#some-general-uncertainty-concepts">Some general uncertainty concepts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../L1/reporting-measurements.html">Reporting measurements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../L1/reporting-measurements.html#reporting-a-measured-value">Reporting a measured value</a></li>
<li class="toctree-l2"><a class="reference internal" href="../L1/reporting-measurements.html#standard-deviation-versus-standard-error">Standard deviation versus standard error</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../L1/normal-distribution.html">The normal distribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L1/exercise-1.html">Exercise 1</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../L1/exercise-1.html#general-hints-for-exercise-1">General hints for Exercise 1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../L1/exercise-1.html#sigma-notation">Sigma notation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../L1/exercise-1.html#problem-1">Problem 1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../L1/exercise-1.html#function-docstrings">Function docstrings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../L1/exercise-1.html#problem-2">Problem 2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../L1/exercise-1.html#skipping-rows-reading-data-with-pandas">Skipping rows reading data with Pandas</a></li>
<li class="toctree-l3"><a class="reference internal" href="../L1/exercise-1.html#dropping-na-values">Dropping NA values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../L1/exercise-1.html#volcanoes-above-sea-level">Volcanoes above sea level</a></li>
<li class="toctree-l3"><a class="reference internal" href="../L1/exercise-1.html#column-name-in-part-5">Column name in Part 5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../L1/exercise-1.html#problem-3">Problem 3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../L1/exercise-1.html#plotting-a-horizontal-line-for-the-bar-plots">Plotting a horizontal line (for the bar plots)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../L1/exercise-1.html#creating-arrays-of-numbers-between-two-values">Creating arrays of numbers between two values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../L1/exercise-1.html#gaussian-troubles">Gaussian troubles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../L1/exercise-1.html#creating-and-appending-to-lists">Creating and appending to lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../L1/exercise-1.html#adding-columns-to-a-dataframe">Adding columns to a DataFrame</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Lesson 2</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../L2/overview.html">Lesson overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../L2/overview.html#learning-objectives">Learning objectives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../L2/overview.html#lesson-video">Lesson video</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks/L2/least-squares.html">Least squares regressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks/L2/linear-correlation.html">Linear correlation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../notebooks/L2/goodness-of-fit.html">Goodness-of-fit calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../L2/exercise-2.html">Exercise 2</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../L2/exercise-2.html#general-hints-for-exercise-2">General hints for Exercise 2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../L2/exercise-2.html#formatting-numbers-in-python">Formatting numbers in Python</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../L2/exercise-2.html#hints-for-problem-1">Hints for Problem 1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../L2/exercise-2.html#returning-more-than-one-value">Returning more than one value</a></li>
<li class="toctree-l3"><a class="reference internal" href="../L2/exercise-2.html#plotting-your-regression-lines">Plotting your regression lines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../L2/exercise-2.html#calculating-summations">Calculating summations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../L2/exercise-2.html#shorthand-python-notation-for-adding-to-a-variable">Shorthand Python notation for adding to a variable</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Final report</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../final-paper/final-report.html">Final paper information</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/final-report.html#abstract">Abstract</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/final-report.html#introduction-2-4-paragraphs">Introduction (2-4 paragraphs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/final-report.html#geological-background-1-3-paragraphs">Geological background (1-3 paragraphs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/final-report.html#methods-at-least-1-paragraph">Methods (at least 1 paragraph)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/final-report.html#results-at-least-1-paragraph">Results (at least 1 paragraph)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/final-report.html#discussion-several-paragraphs">Discussion (several paragraphs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/final-report.html#conclusions-summary-1-2-paragraphs">Conclusions/Summary (1-2 paragraphs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/final-report.html#references">References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/final-report.html#appendices">Appendices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/final-report.html#grading-rubric">Grading rubric</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../final-paper/articles.html">Scientific articles for the final paper</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/articles.html#general-thermochronology-papers">General thermochronology papers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/articles.html#himalaya-review-papers">Himalaya review papers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../final-paper/articles.html#bhutan-himalaya-papers">Bhutan Himalaya papers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../final-paper/template.html">Final paper template</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">IntroQG</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>Exercise 4</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/IntroQG/site/blob/master/source/lessons/L4/exercise-4.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  






<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="exercise-4">
<h1>Exercise 4<a class="headerlink" href="#exercise-4" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Please note that <strong>we provide assignment feedback only for students enrolled in the course at the University of Helsinki</strong>.</p>
</div>
<div class="admonition-start-your-assignment admonition">
<p class="first admonition-title">Start your assignment</p>
<p>You can start working on your copy of Exercise 4 by <a class="reference external" href="https://classroom.github.com/a/VC4rUjbW">accepting the GitHub Classroom assignment</a>.</p>
<p class="last"><strong>Exercise 4 is due by the start of lecture in week 5</strong>.</p>
</div>
<p>You can also take a look at the open course copy of <a class="reference external" href="https://github.com/IntroQG-2018/Exercise-4">Exercise 4 in the course GitHub repository</a> (does not require logging in).
Note that you should not try to make changes to this copy of the exercise, but rather only to the copy available via GitHub Classroom.</p>
<div class="admonition-start-your-assignment admonition">
<p class="first admonition-title">Start your assignment</p>
<p>You can start working on your copy of Exercise 4.1 by <a class="reference external" href="https://classroom.github.com/a/3dMNDiZq">accepting the GitHub Classroom assignment</a>.</p>
<p class="last"><strong>Exercise 4.1 is due by the start of lecture in week 5</strong>.</p>
</div>
<p>You can also take a look at the open course copy of <a class="reference external" href="https://github.com/IntroQG-2018/Exercise-4.1">Exercise 4.1 in the course GitHub repository</a> (does not require logging in).
Note that you should not try to make changes to this copy of the exercise, but rather only to the copy available via GitHub Classroom.</p>
<div class="section" id="hints-for-exercise-4">
<h2>Hints for Exercise 4<a class="headerlink" href="#hints-for-exercise-4" title="Permalink to this headline">¶</a></h2>
<div class="section" id="p1-calculating-dh-dt-see-also-hint-below">
<h3>P1: Calculating dh/dt (see also hint below)<a class="headerlink" href="#p1-calculating-dh-dt-see-also-hint-below" title="Permalink to this headline">¶</a></h3>
<p>For the <code class="docutils literal notranslate"><span class="pre">calculate_dhdt</span></code> function, you should ensure the value you return is negative.
The stream-power itself can be positive, but returning a negative value ensures the stream-power equation acts to lower the topography.</p>
<div class="math notranslate nohighlight">
\[\begin{equation}
  \Large
   \frac{dh}{dt} = -K A^{m} S^{n}
\end{equation}\]</div>
</div>
<div class="section" id="p1-calculating-the-topography-slope">
<h3>P1: Calculating the topography slope<a class="headerlink" href="#p1-calculating-the-topography-slope" title="Permalink to this headline">¶</a></h3>
<p>In order to be able to calculate stream-power erosion from a river channel profile we first need to estimate both the upstream drainage area and calculate the topographic slope.
You have hopefully already calculated the drainage area using your <code class="docutils literal notranslate"><span class="pre">drainage_area</span></code> function, and now we can turn our focus to the slope.
Calculating the slope is not necessarily a difficult thing with NumPy, but you do need to be careful how you do it.</p>
<p>The first thing to recognize is that the slope at any given point will simply be the difference in elevation between that point and a neighboring point divided by the horizontal distance between them.
In other words, slope is the change in elevation divided by the change in horizontal distance.
You could calculate this by hand, but NumPy has some useful functions for this, including <code class="docutils literal notranslate"><span class="pre">np.diff</span></code>.
Below, you can see how to use <code class="docutils literal notranslate"><span class="pre">np.diff</span></code> to calculate the channel slope.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">slope</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diff</span><span class="p">(</span><span class="n">topography</span><span class="p">)</span><span class="o">/</span><span class="n">dx</span>           <span class="c1"># Calculate profile slopes; diff() calculates elevation difference between points</span>
<span class="n">slope</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">slope</span><span class="p">)</span>                       <span class="c1"># Take the absolute value of the slope to avoid direction issues</span>
<span class="n">slope</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">slope</span><span class="p">,</span> <span class="n">slope</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>      <span class="c1"># Append one extra slope value to be same size as the area array</span>
</pre></div>
</div>
<p>Above, we use <code class="docutils literal notranslate"><span class="pre">np.diff</span></code> to calculate the slope, but since it calculates the difference between the elevation of points, it returns one less value than in <code class="docutils literal notranslate"><span class="pre">topography</span></code>.
To account for this, we add one extra value back to the <code class="docutils literal notranslate"><span class="pre">slope</span></code> variable.</p>
</div>
<div class="section" id="p2-passing-returning-figure-objects">
<h3>P2: Passing/returning figure objects<a class="headerlink" href="#p2-passing-returning-figure-objects" title="Permalink to this headline">¶</a></h3>
<p>When using functions with figures, it is necessary to pass the information about the figure as parameters when using any functions that update the figure.
In other words, the functions will need things related to the figure in order to update them.
For example, in the <code class="docutils literal notranslate"><span class="pre">update_figure</span></code> function you can see that <code class="docutils literal notranslate"><span class="pre">ax1</span></code> and <code class="docutils literal notranslate"><span class="pre">plot1</span></code> are given as values in the list of parameters used by the function.
This is because the <code class="docutils literal notranslate"><span class="pre">ax1</span></code> and <code class="docutils literal notranslate"><span class="pre">plot1</span></code> data are updated within the function (as are <code class="docutils literal notranslate"><span class="pre">time_text</span></code> and <code class="docutils literal notranslate"><span class="pre">elev_text</span></code>).
Likewise, the updated <code class="docutils literal notranslate"><span class="pre">plot1</span></code> object is returned.</p>
<p>When you add the second subplot, you will need to be sure that any function that need the plot information has that information passed in and/or returned.
This means you need to modify not only the <code class="docutils literal notranslate"><span class="pre">update_figure</span></code> function, but also make sure you update the list of variables passed to that function where the matplotlib <code class="docutils literal notranslate"><span class="pre">animation.FuncAnimation</span></code> function is called near the end of the <code class="docutils literal notranslate"><span class="pre">stream_power</span></code> function.
Specifically, anything you pass into <code class="docutils literal notranslate"><span class="pre">update_figure</span></code> will need to be in the list of variables <code class="docutils literal notranslate"><span class="pre">fargs</span></code> in the call of <code class="docutils literal notranslate"><span class="pre">animation.FuncAnimation</span></code>.
<code class="docutils literal notranslate"><span class="pre">fargs</span></code> is the list of varaibles used by the function <code class="docutils literal notranslate"><span class="pre">update_figure</span></code>.</p>
</div>
<div class="section" id="p2-units">
<h3>P2: Units<a class="headerlink" href="#p2-units" title="Permalink to this headline">¶</a></h3>
<p>Just as a reminder, the values for <code class="docutils literal notranslate"><span class="pre">dhdt</span></code> are m/a and the plot should have units of mm/a.
We also want the erosion rate to plot as a positive value, rather than the negative values that <code class="docutils literal notranslate"><span class="pre">dhdt</span></code> has in the code.
You can compensate for these differences when setting the <em>y</em> data to plot.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, D. Whipp, Department of Geosciences and Geography, University of Helsinki.
      <span class="lastupdated">
        Last updated on Dec 10, 2018.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
    <p><br/><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /></a></p>
     


</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: master
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Tags</dt>
            <dd><a href="../../2017/index.html">2017</a></dd>
            <dd><a href="../../2018/lessons/L4/exercise-4.html">2018</a></dd>
        </dl>
        <dl>
            <dt>Branches</dt>
            <dd><a href="../../develop/lessons/L4/exercise-4.html">develop</a></dd>
            <dd><a href="../../master/lessons/L4/exercise-4.html">master</a></dd>
        </dl>
    </div>
</div>


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>